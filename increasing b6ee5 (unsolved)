#include <iostream>
#include <algorithm>
#include <vector>
#include <cstdio>
#include <cstdlib>
#include <map>
#include <queue>
#include <climits>
#include <utility>
#include <functional>
#define INF (1L<<60)
typedef long long int ll;
using  namespace std;
vector< vector < pair < ll,ll > > > graph;
int n,m,q;
long long int Dijkstra(ll s,ll t,ll c)
{
    vector<ll> dist(n+5,INF);
    vector<ll> prev(n+5,-1);
    vector<ll> counter(n+5,0);
    
    priority_queue< pair<ll,ll> ,vector< pair<ll,ll> > , greater< pair<ll,ll> > > pq;
    
    dist[s]=0;
    prev[s]=0;
    counter[s]=c;
    pq.push(make_pair(0,s));
    while(!pq.empty())
    {
        pair<ll,ll> p=pq.top();
        pq.pop();
        ll u=p.second;
        ll d=p.first;
        if(u==t)
            return dist[u];
        if(counter[u]>0)
        {
            for(int i=0;i<graph[u].size();i++)
            {
                ll v=graph[u][i].second;
                ll dv=graph[u][i].first;
                if(dist[v]>dv+d && dv>=prev[u])
                {
                    dist[v]=dv+d;
                    prev[v]=dv;
                    counter[v]=counter[u]-1;
                    pq.push(make_pair(dist[v],v));
                } 
            }
        }
    }
    return -1;
}
int main()
{
    freopen("in.txt","r",stdin);
    freopen("out.txt","w",stdout);
    int cases;cin>>cases;
    while(cases--)
    {
        cin>>n>>m>>q;
        graph.clear();
        graph.assign(n+1,vector< pair<ll,ll> >());
        for(int i=0;i<m;i++)
        {
            ll t1,t2,t3;
            cin>>t1>>t2>>t3;
            graph[t1].push_back(make_pair(t3,t2));
        }
        for(int i=0;i<q;i++)
        {
            ll s,t,c;
            cin>>s>>t>>c;
            long long int res=Dijkstra(s,t,c);
            cout<<res<<endl;
        }
    }
}
